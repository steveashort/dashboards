:root {
    --bg-color: #121212;
    --card-bg: #1e1e1e;
    --input-bg: #2d2d2d;
    --modal-bg: #252525;
    --text-main: #e0e0e0;
    --text-muted: #a0a0a0;
    --accent: #bb86fc;
    --accent-hover: #9965f4;
    --border: #333;

    /* Status Colors */
    --g-green: #00e676;
    --g-amber: #ffb300;
    --g-red: #ff1744;
    --g-grey: #666666;
    /* Chart Colors */
    --chart-1: #03dac6;
    --chart-2: #ff4081;
}

* { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; }

body {
    background-color: var(--bg-color);
    color: var(--text-main);
    padding: 2rem;
    min-height: 100vh;
    padding-bottom: 4rem;
}
header {
    display: flex; justify-content: space-between; align-items: center;
    margin-bottom: 2rem; border-bottom: 1px solid var(--border); padding-bottom: 1.5rem;
    gap: 1.5rem; flex-wrap: wrap;
    position: sticky; top: 0; z-index: 1000; background-color: var(--bg-color);
}
.header-left { display: flex; align-items: center; gap: 15px; }
.header-logo-img { width: 48px; height: 48px; object-fit: contain; }

#appTitle {
    font-weight: 300; letter-spacing: 1px; color: var(--accent); margin: 0;
    border-bottom: 1px dashed transparent; cursor: text; transition: border 0.2s;
}
#appTitle:hover { border-bottom-color: var(--accent); }
#appTitle:focus { outline: none; border-bottom: 1px solid var(--accent); }
.date-display { color: var(--text-muted); font-size: 0.9rem; font-family: monospace; margin-top: 5px; }
.header-actions { display: flex; gap: 0.8rem; align-items: center; flex-wrap: wrap; }

.btn {
    background: var(--input-bg); border: 1px solid var(--accent); color: var(--accent);
    padding: 0.6rem 1.2rem; border-radius: 4px; cursor: pointer; font-size: 0.85rem;
    transition: all 0.2s; font-weight: 600;
}
.btn:hover { background: var(--accent); color: #000; }
.btn-primary { background: var(--accent); color: #000; }
.btn-primary:hover { background: var(--accent-hover); }
.btn-sm { padding: 0.4rem 0.8rem; font-size: 0.75rem; }

.btn-reset {
    background: transparent; border: 1px solid #444; color: var(--text-muted);
    padding: 2px 8px; border-radius: 3px; cursor: pointer; font-size: 0.7rem;
    margin-top: 0.8rem; width: auto; display: inline-block; transition: all 0.2s;
}
.btn-reset:hover { border-color: var(--g-red); color: var(--g-red); }

/* Publishing Mode Styles */
body.publishing .header-actions { display: none; }
body.publishing .btn-del-tracker { display: none; }
body.publishing #appTitle { border-bottom: none; pointer-events: none; }

#publishToggleBtn {
    position: fixed; bottom: 20px; right: 20px; z-index: 9999;
    box-shadow: 0 0 10px rgba(0,0,0,0.5);
}

.team-overview-panel {
    background-color: var(--card-bg); border: 1px solid var(--border); border-radius: 8px;
    padding: 1.5rem; margin-bottom: 2rem; display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 2rem;
}
.overview-col h4 {
    color: var(--accent); font-size: 0.85rem; text-transform: uppercase;
    border-bottom: 1px solid var(--border); padding-bottom: 0.5rem; margin-bottom: 0.5rem;
}
.date-suffix { color: var(--text-muted); font-weight: normal; font-size: 0.8em; margin-left: 8px; text-transform: none; }
.edit-hint { font-size: 0.7rem; color: #666; font-style: italic; margin-bottom: 1rem; display: block; }
.overview-list { list-style: none; font-size: 0.9rem; line-height: 1.4; color: var(--text-main); }
.overview-list li { margin-bottom: 0.5rem; position: relative; padding-left: 1rem; }
.overview-list li::before { content: "•"; position: absolute; left: 0; color: #fff; }
.auto-item { color: var(--text-main); }
.auto-item b { color: var(--text-muted); margin-right: 5px; }
.overview-col.interactive {
    cursor: pointer; position: relative; transition: background 0.2s; border-radius: 4px; padding: 0.5rem; margin: -0.5rem;
}
.overview-col.interactive:hover { background: rgba(255,255,255,0.05); }
.overview-col.interactive::after {
    content: "✎"; position: absolute; top: 0.5rem; right: 0.5rem; color: var(--text-muted); opacity: 0; transition: opacity 0.2s;
}
.overview-col.interactive:hover::after { opacity: 1; }
#additionalInfoPreview { font-size: 0.9rem; line-height: 1.5; color: var(--text-main); pointer-events: none; }
#additionalInfoPreview ul { padding-left: 1.2rem; margin-bottom: 0.5rem; }
#additionalInfoPreview li { margin-bottom: 0.2rem; }
#additionalInfoPreview b { color: #fff; }
#additionalInfoPreview a { color: var(--chart-1); text-decoration: none; border-bottom: 1px dashed var(--chart-1); cursor: pointer; pointer-events: auto; }
#additionalInfoPreview a:hover { border-bottom-style: solid; }
.section-header {
    display: flex; justify-content: space-between; align-items: center;
    margin-bottom: 1rem; border-top: 1px solid var(--border); padding-top: 1rem;
}
.section-header.first { border-top: none; padding-top: 0; }
.tracker-grid {
    display: flex; flex-wrap: wrap; gap: 1.5rem; margin-bottom: 3rem;
}
.tracker-card {
    background-color: var(--card-bg); border: 1px solid var(--border); border-radius: 8px;
    padding: 1rem; text-align: center; position: relative; cursor: pointer; transition: transform 0.2s;
    min-height: 280px; display: flex; flex-direction: column; justify-content: space-between;
    flex-grow: 1;
}
.tracker-card.size-S { flex-basis: calc(20% - 1.5rem); max-width: calc(20% - 1.5rem); }
.tracker-card.size-M { flex-basis: calc(33.333% - 1.5rem); max-width: calc(33.333% - 1.5rem); }
.tracker-card.size-L { flex-basis: calc(50% - 1.5rem); max-width: calc(50% - 1.5rem); }
.tracker-card.size-XL { flex-basis: 100%; max-width: 100%; }

.tracker-card.height-2x { min-height: 560px; }

/* Fallback for smaller screens */
@media (max-width: 1200px) {
    .tracker-card.size-S { flex-basis: calc(33.333% - 1.5rem); max-width: calc(33.333% - 1.5rem); }
}
@media (max-width: 768px) {
    .tracker-card.size-S, .tracker-card.size-M, .tracker-card.size-L { flex-basis: 100%; max-width: 100%; }
}

.tracker-card:hover { border-color: var(--accent); transform: translateY(-2px); }
.tracker-desc { font-weight: bold; margin-bottom: 1rem; color: var(--text-main); height: 30px; display: flex; align-items: center; justify-content: center;}
.tracker-viz-container { flex-grow: 1; display: flex; align-items: center; justify-content: center; width: 100%; height: 160px; overflow: visible; padding: 0 5px; }
.tracker-card.height-2x .tracker-viz-container { height: 440px; }
.tracker-viz-container > div { width: 100% !important; }
.tracker-card.dragging { opacity: 0.5; border: 2px dashed var(--accent); }
.tracker-grid.drag-active .tracker-card { cursor: grabbing; }

.status-select-col { display: flex; flex-direction: column; gap: 5px; width: 30%; }
.status-option {
    width: 100%; padding: 8px; border-radius: 4px; text-align: center; cursor: pointer;
    font-weight: bold; font-size: 0.8rem; opacity: 0.5; border: 1px solid #444; color: #000;
}
/* Ensure workload pills take full width of their container */
.ls-box { text-align: center; flex: 1; }
.pill-group .w-pill { width: 100%; }

.average-pill {
    position: absolute; top: 10px; right: 10px; padding: 4px 8px; border-radius: 12px;
    font-size: 0.7rem; font-weight: bold; color: #000; box-shadow: 0 2px 5px rgba(0,0,0,0.5);
}
.tracker-stats { font-size: 0.8rem; color: var(--text-muted); margin-top: auto; padding-top:1rem; }
.last-updated {
    position: absolute; top: 5px; right: 25px;
    font-size: 0.65rem; color: #666; font-family: monospace;
    background: rgba(0,0,0,0.5); padding: 2px 6px; border-radius: 4px;
    z-index: 5;
}
.btn-del-tracker {
    position: absolute; top: 10px; right: 10px; color: #666; background: none; border: none; cursor: pointer; font-size: 1.2rem; z-index: 2;
}
.btn-del-tracker:hover { color: var(--g-red); }
.team-grid { display: grid; grid-template-columns: 1fr; gap: 2rem; width: 100%; }
.member-card {
    background-color: var(--card-bg); border: 1px solid var(--border); border-radius: 12px;
    transition: transform 0.2s; position: relative; cursor: pointer; overflow: hidden;
    display: flex; flex-direction: column; padding: 0; box-shadow: 0 4px 10px rgba(0,0,0,0.4);
    width: 100%; margin-bottom: 1rem;
}
.member-card:hover { border-color: var(--accent); transform: translateY(-4px); box-shadow: 0 10px 20px rgba(0,0,0,0.6); }

.member-header {
    padding: 1.5rem 0 0 1.5rem;
    font-size: 1.2rem;
    font-weight: bold;
    color: var(--accent);
}

/* 3-Column User Card Layout */
.member-card-content {
    display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1.5rem; padding: 1.5rem; flex-grow: 1;
}
.card-col {
    display: flex; flex-direction: column; gap: 1rem; padding: 1.5rem;
    background: rgba(255,255,255,0.02); border-radius: 8px; border: 1px solid #333;
    min-height: 200px;
}
.col-header { 
    font-size: 0.85rem; text-transform: uppercase; color: var(--accent); 
    font-weight: bold; text-align: center; border-bottom: 1px solid #444; padding-bottom: 10px; margin-bottom: 10px;
    letter-spacing: 1px;
}

.card-task-li { margin-bottom: 0.8rem; display: flex; gap: 10px; align-items: flex-start; line-height: 1.4; }
.card-task-li input[type="checkbox"] { margin-top: 4px; accent-color: var(--accent); transform: scale(1.2); }

.status-under { background-color: var(--g-red); color: #fff; }
.status-busy { background-color: var(--g-amber); color: #000; }
.status-over { background-color: var(--g-green); color: #000; }
.status-absent { background-color: var(--accent); color: #fff; opacity: 0.8; }

.note-render-container {
    max-height: 100%; overflow-y: auto; width: 100%; height: 100%;
    padding: 10px; font-size: 0.9rem; line-height: 1.4; color: var(--text-main);
}
/* Purple Scrollbar for Note Container */
.note-render-container::-webkit-scrollbar { width: 6px; }
.note-render-container::-webkit-scrollbar-track { background: rgba(255,255,255,0.05); }
.note-render-container::-webkit-scrollbar-thumb { background: var(--accent); border-radius: 3px; }
.note-render-container::-webkit-scrollbar-thumb:hover { background: var(--accent-hover); }

.note-render-container ul { padding-left: 20px; margin-bottom: 10px; }
.note-render-container li { margin-bottom: 5px; list-style-type: disc; }

.zoomed-content ul { list-style: none; font-size: 1.5rem; line-height: 2; padding-left: 1rem; }
.zoomed-content li { margin-bottom: 1rem; position: relative; padding-left: 2rem; }
.zoomed-content li::before { content: "★"; position: absolute; left: 0; color: gold; font-size: 1.5rem; line-height: 2; }

@keyframes flash {
    0% { opacity: 1; filter: drop-shadow(0 0 5px #00FFFF); }
    50% { opacity: 0.5; filter: none; }
    100% { opacity: 1; filter: drop-shadow(0 0 5px #00FFFF); }
}
.flash-icon {
    animation: flash 1s infinite;
}

.donut-row, .event-row, .counter-row {
    display: flex; gap: 10px; margin-bottom: 5px;
}

/* Color Picker */
.color-picker-container {
    display: flex; flex-wrap: wrap; gap: 5px; margin-top: 5px;
}
.color-swatch {
    width: 20px; height: 20px; border-radius: 3px; cursor: pointer;
    border: 1px solid #444; opacity: 0.7; transition: all 0.2s;
}
.color-swatch:hover { transform: scale(1.2); opacity: 1; border-color: #fff; }
.color-swatch.selected { border: 2px solid #fff; opacity: 1; box-shadow: 0 0 5px rgba(255,255,255,0.5); }
